<html>

<head>
   <link rel="stylesheet" href="css/flex2html.css">
   <script type="text/javascript" src="js/flex2html.min.js"></script>
</head>

<body>
   <h3>Input:</h3>
   <label for="roomNo">เลขห้องพัก: </label>
   <input type="text" id="roomNo" />
   <br>
   <label for="building">หอพัก: </label>
   <input list="building-choice" id="building" name="building">
   <datalist id="building-choice">
      <option value="ทวีชัย1">
      <option value="ทวีชัย2">
      <option value="รุ่งเรือง">
      <option value="วราภา">
   </datalist>
   <br>
   <label for="month">เดือน: </label>
   <input list="month-choice" id="month" name="month">
   <datalist id="month-choice">
      <option value="มิ.ย. 66">
      <option value="ก.ค. 66">
      <option value="ส.ค. 66">
      <option value="ก.ย. 66">
      <option value="ต.ค. 66">
   </datalist>
   <br>
   <label for="roomValue">ค่าเช่าห้อง: </label>
   <input type="number" id="roomValue" />
   <br>
   <label for="waterValue">ค่าน้ำ: </label>
   <input type="number" id="waterValue" />
   <br>
   <label for="powerValue">ค่าไฟ: </label>
   <input type="number" id="powerValue" />
   <br>
   <label for="commonValue">ค่าส่วนกลาง: </label>
   <input type="number" id="commonValue" />
   <br>
   <label for="otherValue">อื่นๆ: </label>
   <input type="number" id="otherValue" />
   <!-- 
   <br>
   <label for="bank">ธนาคาร: </label>
   <input type="text" id="bank" />
   <br>
   <label for="bankName">ชื่อบัญชี: </label>
   <input type="text" id="bankName" />
   <br>
   <label for="bankNumber">เลขบัญชี: </label>
   <input type="text" id="bankNumber"/>
   -->
   <br><br>
   <button type="button" onclick="getInputValue()">
      Get Value From Input
   </button>
   <br>
   <h3>Output:</h3>
   <p id="output"></p>

   <div class="chatbox">
      <div id="flex1"></div>
   </div>

   <script>
      function getInputValue() {
         let roomNo = document.getElementById("roomNo").value;
         let building = document.getElementById("building").value;
         let month = document.getElementById("month").value;
         let roomValue = parseFloat(document.getElementById("roomValue").value);
         let waterValue = parseFloat(document.getElementById("waterValue").value);
         let powerValue = parseFloat(document.getElementById("powerValue").value);
         let commonValue = parseFloat(document.getElementById("commonValue").value);
         let otherValue = parseFloat(document.getElementById("otherValue").value);
         let bank = "--";
         let bankName = "--";
         let bankNumber = "--";

         let detailWater = '';
         let detailPower = '';

         if (building == "ทวีชัย1") 
         {
            bank = "กรุงศรีอยุธยา";
            bankName = "ธีร์ธรรม";
            bankNumber = "801-4-51129-6";
         }
         else if (building == "ทวีชัย2") 
         {
            bank = "กรุงศรีอยุธยา";
            bankName = "ธีร์ธรรม";
            bankNumber = "801-4-52943-1";
         } 
         else if (building == "รุ่งเรือง") {
            bank = "กสิกรไทย";
            bankName = "ลักษณาวดี";
            bankNumber = "008 2 47169 3";
         }
         else if (building == "วราภา") 
         {
            bank = "ไทยพาณิชย์";
            bankName = "ลักษณาวดี";
            bankNumber = "018-260630-8";
         }

         let total = roomValue + waterValue + powerValue + commonValue + otherValue;
         flex2html("flex1",
            {
               "type": "flex",
               "altText": "Flex Message",
               "contents": {
                  "type": "bubble",
                  "size": "giga",
                  "body": {
                     "type": "box",
                     "layout": "vertical",
                     "contents": [
                        {
                           "type": "text",
                           "text": "ใบแจ้งค่าเช่าห้อง",
                           "weight": "bold",
                           "color": "#00AB00",
                           "size": "xl",
                           "style": "normal",
                           "align": "center"
                        },
                        {
                           "type": "text",
                           "text": "ห้อง " + roomNo,
                           "weight": "bold",
                           "size": "xl",
                           "margin": "none",
                           "align": "center",
                           "color": "#0033FF"
                        },
                        {
                           "type": "box",
                           "layout": "horizontal",
                           "contents": [
                              {
                                 "type": "text",
                                 "text": building,
                                 "size": "lg",
                                 "color": "#000000",
                                 "wrap": true,
                                 "align": "start",
                                 "weight": "regular"
                              },
                              {
                                 "type": "text",
                                 "text": month,
                                 "size": "lg",
                                 "color": "#000000",
                                 "wrap": true,
                                 "align": "end",
                                 "weight": "regular"
                              }
                           ],
                           "position": "relative",
                           "margin": "xl",
                           "spacing": "none"
                        },
                        {
                           "type": "box",
                           "layout": "vertical",
                           "margin": "sm",
                           "spacing": "sm",
                           "contents": [
                              {
                                 "type": "separator",
                                 "margin": "md"
                              },
                              {
                                 "type": "box",
                                 "layout": "horizontal",
                                 "contents": [
                                    {
                                       "type": "text",
                                       "text": "ค่าเช่าห้อง",
                                       "size": "sm",
                                       "flex": 0,
                                       "margin": "none",
                                       "color": "#000000"
                                    },
                                    {
                                       "type": "text",
                                       "text": roomValue + ' บาท',
                                       "size": "sm",
                                       "color": "#000000",
                                       "align": "end"
                                    }
                                 ],
                                 "margin": "lg"
                              },
                              {
                                 "type": "separator",
                                 "margin": "lg"
                              }
                           ]
                        },
                        {
                           "type": "box",
                           "layout": "vertical",
                           "margin": "none",
                           "spacing": "xs",
                           "contents": [
                              {
                                 "type": "box",
                                 "layout": "horizontal",
                                 "contents": [
                                    {
                                       "type": "text",
                                       "text": "ค่าน้ำ",
                                       "size": "sm",
                                       "color": "#000000",
                                       "flex": 0,
                                       "margin": "none"
                                    },
                                    {
                                       "type": "text",
                                       "text": waterValue + ' บาท',
                                       "size": "sm",
                                       "color": "#000000",
                                       "align": "end"
                                    }
                                 ],
                                 "margin": "sm"
                              },
                              {
                                 "type": "box",
                                 "layout": "horizontal",
                                 "contents": [
                                    {
                                       "type": "text",
                                       "text": detailWater,
                                       "size": "sm",
                                       "color": "#000000",
                                       "flex": 0,
                                       "margin": "none"
                                    }
                                 ],
                                 "margin": "none"
                              },
                              {
                                 "type": "separator",
                                 "margin": "sm"
                              }
                           ]
                        },
                        {
                           "type": "box",
                           "layout": "vertical",
                           "margin": "none",
                           "spacing": "xs",
                           "contents": [
                              {
                                 "type": "box",
                                 "layout": "horizontal",
                                 "contents": [
                                    {
                                       "type": "text",
                                       "text": "ค่าไฟ",
                                       "size": "sm",
                                       "color": "#000000",
                                       "flex": 0,
                                       "margin": "none"
                                    },
                                    {
                                       "type": "text",
                                       "text": powerValue + ' บาท',
                                       "size": "sm",
                                       "color": "#000000",
                                       "align": "end"
                                    }
                                 ],
                                 "margin": "sm"
                              },
                              {
                                 "type": "box",
                                 "layout": "horizontal",
                                 "contents": [
                                    {
                                       "type": "text",
                                       "text": detailPower,
                                       "size": "sm",
                                       "color": "#000000",
                                       "flex": 0,
                                       "margin": "none"
                                    }
                                 ],
                                 "margin": "none"
                              },
                              {
                                 "type": "separator",
                                 "margin": "sm"
                              }
                           ]
                        },
                        {
                           "type": "box",
                           "layout": "vertical",
                           "margin": "none",
                           "spacing": "sm",
                           "contents": [
                              {
                                 "type": "box",
                                 "layout": "horizontal",
                                 "contents": [
                                    {
                                       "type": "text",
                                       "text": "ค่าส่วนกลาง",
                                       "size": "sm",
                                       "flex": 0,
                                       "margin": "none",
                                       "color": "#000000"
                                    },
                                    {
                                       "type": "text",
                                       "text": commonValue + ' บาท',
                                       "size": "sm",
                                       "color": "#000000",
                                       "align": "end"
                                    }
                                 ],
                                 "margin": "lg"
                              },
                              {
                                 "type": "separator",
                                 "margin": "lg"
                              }
                           ]
                        },
                        {
                           "type": "box",
                           "layout": "vertical",
                           "margin": "none",
                           "spacing": "sm",
                           "contents": [
                              {
                                 "type": "box",
                                 "layout": "horizontal",
                                 "contents": [
                                    {
                                       "type": "text",
                                       "text": "อื่นๆ",
                                       "size": "sm",
                                       "flex": 0,
                                       "margin": "none",
                                       "color": "#000000"
                                    },
                                    {
                                       "type": "text",
                                       "text": otherValue + ' บาท',
                                       "size": "sm",
                                       "color": "#000000",
                                       "align": "end"
                                    }
                                 ],
                                 "margin": "lg"
                              },
                              {
                                 "type": "separator",
                                 "margin": "lg"
                              }
                           ]
                        },
                        {
                           "type": "box",
                           "layout": "vertical",
                           "margin": "none",
                           "spacing": "sm",
                           "contents": [
                              {
                                 "type": "box",
                                 "layout": "horizontal",
                                 "contents": [
                                    {
                                       "type": "text",
                                       "text": "รวม:",
                                       "size": "xl",
                                       "flex": 0,
                                       "margin": "none",
                                       "color": "#FF0000",
                                       "weight": "regular"
                                    },
                                    {
                                       "type": "text",
                                       "text": total + ' บาท',
                                       "size": "xl",
                                       "color": "#FF0000",
                                       "align": "end",
                                       "weight": "regular"
                                    }
                                 ],
                                 "margin": "lg"
                              },
                              {
                                 "type": "separator",
                                 "margin": "lg"
                              }
                           ]
                        },
                        {
                           "type": "box",
                           "layout": "vertical",
                           "margin": "none",
                           "spacing": "sm",
                           "contents": [
                              {
                                 "type": "box",
                                 "layout": "vertical",
                                 "contents": [
                                    {
                                       "type": "text",
                                       "text": "โอนเข้าบัญชี : " + bankName,
                                       "size": "lg",
                                       "color": "#000000",
                                       "wrap": true,
                                       "align": "center",
                                       "weight": "bold",
                                       "margin": "none"
                                    },
                                    {
                                       "type": "text",
                                       "text": bank + " : " + bankNumber,
                                       "size": "lg",
                                       "color": "#000000",
                                       "wrap": true,
                                       "align": "center",
                                       "weight": "bold",
                                       "margin": "sm"
                                    }
                                 ],
                                 "margin": "xl"
                              }
                           ]
                        }
                     ]
                  },
                  "styles": {
                     "footer": {
                        "separator": true
                     }
                  }
               }
            })
      }
   </script>




</body>

</html>